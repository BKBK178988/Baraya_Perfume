<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BARAYA PERFUME - р╕Щр╣Йр╕│р╕лр╕нр╕бр╣Бр╕Чр╣Й р╕Др╕╕р╕Ур╕ар╕▓р╕Юр╕Юр╕гр╕╡р╣Ар╕бр╕╡р╕вр╕б</title>
    <link rel="stylesheet" href="styles-modern.css">
    <meta name="description" content="р╕Щр╣Йр╕│р╕лр╕нр╕бр╣Бр╕Чр╣Й р╕лр╕гр╕╣р╕лр╕гр╕▓ р╕лр╕нр╕бр╕Хр╕┤р╕Фр╕Чр╕Щ р╕гр╕▓р╕Др╕▓р╕Юр╕┤р╣Ар╕ир╕й">
</head>
<body>

    <header>
        <h1>ЁЯТР BARAYA PERFUME</h1>
        <p>р╕Щр╣Йр╕│р╕лр╕нр╕бр╣Бр╕Чр╣Й р╕лр╕гр╕╣р╕лр╕гр╕▓ р╕лр╕нр╕бр╕Хр╕┤р╕Фр╕Чр╕Щ тЬи</p>
        <div style="display:flex; align-items:center; gap:12px; justify-content:center;">
            <div id="auth-area"></div>
            <button class="cart-button" onclick="toggleCart()">
                ЁЯЫТ р╕Хр╕░р╕Бр╕гр╣Йр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓ (<span id="cart-count">0</span>)
            </button>
        </div>
    </header>

    <section class="products">
        <!-- Product 1 - AQUA.M -->
        <div class="product" data-name="AQUA.M" data-price="199">
            <span class="product-badge bestseller">р╕Вр╕▓р╕вр╕Фр╕╡</span>
            <img src="AQUA.M.png" alt="AQUA.M р╕Щр╣Йр╕│р╕лр╕нр╕б">
            <div class="product-rating">
                <span class="stars">тнРтнРтнРтнРтнР</span>
                <span class="rating-count">(124)</span>
            </div>
            <h3>AQUA.M</h3>
            <p>р╣Бр╕Щр╕зр╕кр╕Ыр╕нр╕гр╣Мр╕Х р╣Ар╕Чр╣И р╕лр╕гр╕╣р╕лр╕гр╕▓ р╕кр╕Фр╕Кр╕╖р╣Ир╕Щ ЁЯМК</p>
            <span class="product-price">199 р╕Ър╕▓р╕Ч</span>
            <button class="add-to-cart" onclick="addToCartModern(this, 'AQUA.M', 199)">
                ЁЯЫТ р╣Ар╕Юр╕┤р╣Ир╕бр╕ер╕Зр╕Хр╕░р╕Бр╕гр╣Йр╕▓
            </button>
        </div>

        <!-- Product 2 - BOMBSHELL -->
        <div class="product" data-name="BOMBSHELL" data-price="199">
            <span class="product-badge new">р╣Гр╕лр╕бр╣И</span>
            <img src="BOMSHELL.png" alt="BOMBSHELL р╕Щр╣Йр╕│р╕лр╕нр╕б">
            <div class="product-rating">
                <span class="stars">тнРтнРтнРтнРтнР</span>
                <span class="rating-count">(98)</span>
            </div>
            <h3>BOMBSHELL</h3>
            <p>р╕лр╕нр╕бр╣Ар╕Лр╣Зр╕Бр╕Лр╕╡р╣И р╕Вр╕╡р╣Йр╣Ар╕ер╣Ир╕Щ р╕Яр╕гр╕╕р╣Кр╕Хр╕Хр╕╡р╣Й ЁЯТЛ</p>
            <span class="product-price">199 р╕Ър╕▓р╕Ч</span>
            <button class="add-to-cart" onclick="addToCartModern(this, 'BOMBSHELL', 199)">
                ЁЯЫТ р╣Ар╕Юр╕┤р╣Ир╕бр╕ер╕Зр╕Хр╕░р╕Бр╕гр╣Йр╕▓
            </button>
        </div>

        <!-- Product 3 - FIRST LOVE -->
        <div class="product" data-name="FIRST LOVE" data-price="199">
            <span class="product-badge bestseller">р╕Вр╕▓р╕вр╕Фр╕╡</span>
            <img src="FIRST LOVE.png" alt="FIRST LOVE р╕Щр╣Йр╕│р╕лр╕нр╕б">
            <div class="product-rating">
                <span class="stars">тнРтнРтнРтнРтнР</span>
                <span class="rating-count">(156)</span>
            </div>
            <h3>FIRST LOVE</h3>
            <p>р╕лр╕нр╕бр╕лр╕зр╕▓р╕Щр╕ер╕░р╕бр╕╕р╕Щ р╕Щр╣Ир╕▓р╕лр╕ер╕Зр╣Гр╕лр╕е ЁЯТЦ</p>
            <span class="product-price">199 р╕Ър╕▓р╕Ч</span>
            <button class="add-to-cart" onclick="addToCartModern(this, 'FIRST LOVE', 199)">
                ЁЯЫТ р╣Ар╕Юр╕┤р╣Ир╕бр╕ер╕Зр╕Хр╕░р╕Бр╕гр╣Йр╕▓
            </button>
        </div>

        <!-- Product 4 - MONG BLACK -->
        <div class="product" data-name="MONG BLACK" data-price="199">
            <span class="product-badge limited">р╕Ир╕│р╕Бр╕▒р╕Ф</span>
            <img src="MONG BLACK.png" alt="MONG BLACK р╕Щр╣Йр╕│р╕лр╕нр╕б">
            <div class="product-rating">
                <span class="stars">тнРтнРтнРтнРтнР</span>
                <span class="rating-count">(87)</span>
            </div>
            <h3>MONG BLACK</h3>
            <p>р╕лр╕гр╕╣р╕лр╕гр╕▓ р╣Др╕ор╣Вр╕Л р╕бр╕╡р╣Ар╕кр╕Щр╣Ир╕лр╣Мр╣Бр╕Ър╕Ър╕Ьр╕╣р╣Йр╕Кр╕▓р╕в ЁЯЦд</p>
            <span class="product-price">199 р╕Ър╕▓р╕Ч</span>
            <button class="add-to-cart" onclick="addToCartModern(this, 'MONG BLACK', 199)">
                ЁЯЫТ р╣Ар╕Юр╕┤р╣Ир╕бр╕ер╕Зр╕Хр╕░р╕Бр╕гр╣Йр╕▓
            </button>
        </div>

        <!-- Product 5 - VIN VIN -->
        <div class="product" data-name="VIN VIN" data-price="199">
            <img src="VIN VIN.png" alt="VIN VIN р╕Щр╣Йр╕│р╕лр╕нр╕б">
            <div class="product-rating">
                <span class="stars">тнРтнРтнРтнРтнР</span>
                <span class="rating-count">(92)</span>
            </div>
            <h3>VIN VIN</h3>
            <p>р╕лр╕нр╕бр╕ер╕░р╕бр╕╕р╕Щ р╕Щр╣Ир╕▓р╕гр╕▒р╕Б р╕кр╕Фр╣Гр╕к р╕Щр╣Ир╕▓р╣Ар╕нр╣Зр╕Щр╕Фр╕╣ ЁЯМ╕</p>
            <span class="product-price">199 р╕Ър╕▓р╕Ч</span>
            <button class="add-to-cart" onclick="addToCartModern(this, 'VIN VIN', 199)">
                ЁЯЫТ р╣Ар╕Юр╕┤р╣Ир╕бр╕ер╕Зр╕Хр╕░р╕Бр╕гр╣Йр╕▓
            </button>
        </div>

        <!-- Product 6 - BERRY HER -->
        <div class="product" data-name="BERRY HER" data-price="199">
            <span class="product-badge new">р╣Гр╕лр╕бр╣И</span>
            <img src="BERRY.png" alt="BERRY HER р╕Щр╣Йр╕│р╕лр╕нр╕б">
            <div class="product-rating">
                <span class="stars">тнРтнРтнРтнРтнР</span>
                <span class="rating-count">(76)</span>
            </div>
            <h3>BERRY HER</h3>
            <p>р╕кр╕▓р╕зр╕лр╕зр╕▓р╕Щр╣Бр╕Др╕Щр╕Фр╕╡р╣Й р╕ер╕░р╕бр╕╕р╕Щ р╕вр╕▒р╣Ир╕зр╕вр╕зр╕Щ ЁЯНУ</p>
            <span class="product-price">199 р╕Ър╕▓р╕Ч</span>
            <button class="add-to-cart" onclick="addToCartModern(this, 'BERRY HER', 199)">
                ЁЯЫТ р╣Ар╕Юр╕┤р╣Ир╕бр╕ер╕Зр╕Хр╕░р╕Бр╕гр╣Йр╕▓
            </button>
        </div>

        <!-- Product 7 - READY PINK -->
        <div class="product" data-name="READY PINK" data-price="199">
            <span class="product-badge bestseller">р╕Вр╕▓р╕вр╕Фр╕╡</span>
            <img src="READY PINK.png" alt="READY PINK р╕Щр╣Йр╕│р╕лр╕нр╕б">
            <div class="product-rating">
                <span class="stars">тнРтнРтнРтнРтнР</span>
                <span class="rating-count">(134)</span>
            </div>
            <h3>READY PINK</h3>
            <p>р╕лр╕нр╕бр╕лр╕зр╕▓р╕Щр╕лр╕гр╕╣ р╕Ьр╕╣р╣Йр╕Фр╕╡ р╕кр╣Др╕Хр╕ер╣Мр╕Др╕╕р╕Ур╕лр╕Щр╕╣ ЁЯСС</p>
            <span class="product-price">199 р╕Ър╕▓р╕Ч</span>
            <button class="add-to-cart" onclick="addToCartModern(this, 'READY PINK', 199)">
                ЁЯЫТ р╣Ар╕Юр╕┤р╣Ир╕бр╕ер╕Зр╕Хр╕░р╕Бр╕гр╣Йр╕▓
            </button>
        </div>

        <!-- Product 8 - BLACK.M -->
        <div class="product" data-name="BLACK.M" data-price="199">
            <img src="BLACK M..png" alt="BLACK.M р╕Щр╣Йр╕│р╕лр╕нр╕б">
            <div class="product-rating">
                <span class="stars">тнРтнРтнРтнРтнР</span>
                <span class="rating-count">(110)</span>
            </div>
            <h3>BLACK.M</h3>
            <p>р╕Бр╕ер╕┤р╣Ир╕Щр╕кр╕╕р╕Вр╕╕р╕б р╕нр╕Ър╕нр╕╕р╣Ир╕Щ р╕кр╕░р╕нр╕▓р╕Ф р╕лр╕гр╕╣р╕лр╕гр╕▓ тЪл</p>
            <span class="product-price">199 р╕Ър╕▓р╕Ч</span>
            <button class="add-to-cart" onclick="addToCartModern(this, 'BLACK.M', 199)">
                ЁЯЫТ р╣Ар╕Юр╕┤р╣Ир╕бр╕ер╕Зр╕Хр╕░р╕Бр╕гр╣Йр╕▓
            </button>
        </div>

        <!-- Product 9 - CRYSTAL -->
        <div class="product" data-name="CRYSTAL" data-price="199">
            <img src="CRYSTAL.png" alt="CRYSTAL р╕Щр╣Йр╕│р╕лр╕нр╕б">
            <div class="product-rating">
                <span class="stars">тнРтнРтнРтнРтнР</span>
                <span class="rating-count">(88)</span>
            </div>
            <h3>CRYSTAL</h3>
            <p>р╕кр╕░р╕нр╕▓р╕Ф р╕кр╕Фр╕Кр╕╖р╣Ир╕Щ р╕нр╣Ир╕нр╕Щр╣Вр╕вр╕Щ ЁЯТО</p>
            <span class="product-price">199 р╕Ър╕▓р╕Ч</span>
            <button class="add-to-cart" onclick="addToCartModern(this, 'CRYSTAL', 199)">
                ЁЯЫТ р╣Ар╕Юр╕┤р╣Ир╕бр╕ер╕Зр╕Хр╕░р╕Бр╕гр╣Йр╕▓
            </button>
        </div>

    </section>
    
    <!-- р╕Хр╕░р╕Бр╕гр╣Йр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓ -->
    <div id="cart" class="cart">
        <h2>ЁЯЫТ р╕Хр╕░р╕Бр╕гр╣Йр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓</h2>
        <ul id="cart-items"></ul>
        <p id="total-price">р╕гр╕▓р╕Др╕▓р╕гр╕зр╕б: 0 р╕Ър╕▓р╕Ч</p>
        <button id="saveOrderButton" class="checkout-btn" style="background: linear-gradient(135deg, #4facfe, #00f2fe); margin-bottom: 10px;">
            ЁЯУ╕ р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╣Ар╕Ыр╣Зр╕Щр╕гр╕╣р╕Ыр╕ар╕▓р╕Ю
        </button>
        <a href="checkout-modern.html" class="checkout-btn" style="display: block; text-decoration: none; text-align: center;">
            ЁЯЫНя╕П р╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕гр╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н
        </a>
        <a id="lineOrderButton" href="#" target="_blank" class="checkout-btn" style="display: block; text-decoration: none; text-align: center; margin-top: 10px; background: linear-gradient(135deg, #06c755, #05a74c);">
            ЁЯУ▓ р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕Ьр╣Ир╕▓р╕Щ LINE
        </a>
    </div>

    <!-- р╕зр╕┤р╕Шр╕╡р╕Бр╕▓р╕гр╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н -->
    <section style="max-width: 800px; margin: 60px auto; padding: 40px; background: white; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1);">
        <h2 style="text-align: center; color: #d4af37; margin-bottom: 30px;">ЁЯЫНя╕П р╕зр╕┤р╕Шр╕╡р╕Бр╕▓р╕гр╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н</h2>
        <ol style="line-height: 2; font-size: 1.1em; color: #333; text-align: left; padding-left: 30px;">
            <li>р╣Ар╕ер╕╖р╕нр╕Бр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Бр╕ер╕░р╣Ар╕Юр╕┤р╣Ир╕бр╕ер╕Зр╕Хр╕░р╕Бр╕гр╣Йр╕▓ ЁЯЫТ</li>
            <li>р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б "р╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕гр╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н" ЁЯУЭ</li>
            <li>р╕Бр╕гр╕нр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕кр╣Ир╕З тЬНя╕П</li>
            <li>р╕кр╣Бр╕Бр╕Щ QR Code р╣Ар╕Юр╕╖р╣Ир╕нр╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕Щ ЁЯТ│</li>
            <li>р╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╕кр╕ер╕┤р╕Ыр╕Бр╕▓р╕гр╣Вр╕нр╕Щр╣Ар╕Зр╕┤р╕Щ ЁЯУ╕</li>
            <li>р╕гр╕нр╕гр╕▒р╕Ър╕нр╕╡р╣Ар╕бр╕ер╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Бр╕▓р╕гр╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н тЬЕ</li>
        </ol>
    </section>

    <footer>
        <p style="margin: 10px 0;">
            ЁЯУ▒ <a href="https://line.me/ti/p/OJY81U61Jk" target="_blank" style="color: #d4af37; text-decoration: none;">LINE</a> | 
            ЁЯУз <a href="mailto:Barame07042536@gmail.com" style="color: #d4af37; text-decoration: none;">Email</a>
        </p>
        <p style="color: #666;">&copy; 2025 BARAYA PERFUME - р╕Щр╣Йр╕│р╕лр╕нр╕бр╣Бр╕Чр╣Йр╕Др╕╕р╕Ур╕ар╕▓р╕Юр╕Юр╕гр╕╡р╣Ар╕бр╕╡р╕вр╕б</p>
    </footer>

    <!-- Scripts -->
    <script src="html2canvas.min.js"></script>
    <script src="modern-features.js"></script>
    <script src="auth.js"></script>
    <script src="script.js"></script>
    
    <script>
        // р╕гр╕нр╣Гр╕лр╣Йр╕Чр╕╕р╕Бр╕нр╕вр╣Ир╕▓р╕Зр╣Вр╕лр╕ер╕Фр╣Ар╕кр╕гр╣Зр╕Ир╕Бр╣Ир╕нр╕Щ
        window.addEventListener('load', function() {
            console.log('Page fully loaded');
            console.log('html2canvas available:', typeof html2canvas !== 'undefined');
            console.log('toast available:', typeof window.toast !== 'undefined');
            console.log('showLoading available:', typeof window.showLoading !== 'undefined');
        });

        // р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щ addToCart р╣Гр╕лр╣Йр╣Гр╕Кр╣Й Toast
        function addToCartModern(button, name, price) {
            addToCart(name, price);
            animateAddToCart(button);
            if (window.toast) {
                toast.success(`р╣Ар╕Юр╕┤р╣Ир╕б ${name} р╕ер╕Зр╕Хр╕░р╕Бр╕гр╣Йр╕▓р╣Бр╕ер╣Йр╕з!`, 2000);
            }
        }

        // Save Order to Image - р╣Бр╕Бр╣Йр╣Др╕Вр╣Гр╕лр╕бр╣Ир╣Гр╕лр╣Йр╕Чр╕│р╕Зр╕▓р╕Щр╕Зр╣Ир╕▓р╕вр╕Вр╕╢р╣Йр╕Щ
        const saveOrderBtn = document.getElementById("saveOrderButton");
        if (saveOrderBtn) {
            saveOrderBtn.addEventListener("click", async function() {
                console.log('ЁЯФ╡ р╕Бр╕Фр╕Ыр╕╕р╣Ир╕бр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕нр╕нр╣Ар╕Фр╕нр╕гр╣М');
                
                // р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Хр╕░р╕Бр╕гр╣Йр╕▓
                const cartItems = document.getElementById("cart-items");
                if (!cartItems || cartItems.children.length === 0) {
                    alert("тЪая╕П р╕Бр╕гр╕╕р╕Ур╕▓р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕ер╕Зр╕Хр╕░р╕Бр╕гр╣Йр╕▓р╕Бр╣Ир╕нр╕Щр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕нр╕нр╣Ар╕Фр╕нр╕гр╣М");
                    return;
                }

                // р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ html2canvas
                if (typeof html2canvas === 'undefined') {
                    alert("тЭМ р╣Вр╕Ыр╕гр╕Фр╕гр╕╡р╣Ар╕Яр╕гр╕Кр╕лр╕Щр╣Йр╕▓р╣Ар╕зр╣Зр╕Ър╣Бр╕ер╣Йр╕зр╕ер╕нр╕Зр╣Гр╕лр╕бр╣И");
                    return;
                }

                try {
                    // р╣Бр╕кр╕Фр╕З loading
                    if (window.showLoading) showLoading('р╕Бр╕│р╕ер╕▒р╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕гр╕╣р╕Ыр╕ар╕▓р╕Ю...');
                    
                    const cartElement = document.getElementById("cart");
                    console.log('ЁЯФ╡ р╣Ар╕гр╕┤р╣Ир╕бр╕Ир╕▒р╕Ър╕ар╕▓р╕Юр╕Хр╕░р╕Бр╕гр╣Йр╕▓...');
                    
                    // р╕Ир╕▒р╕Ър╕ар╕▓р╕Юр╕Фр╣Йр╕зр╕в html2canvas
                    const canvas = await html2canvas(cartElement, { 
                        scale: 2,
                        backgroundColor: '#ffffff',
                        logging: true,
                        useCORS: true,
                        allowTaint: true
                    });
                    
                    console.log('тЬЕ р╕кр╕гр╣Йр╕▓р╕З canvas р╕кр╕│р╣Ар╕гр╣Зр╕И');
                    
                    // р╣Бр╕Ыр╕ер╕З canvas р╣Ар╕Ыр╣Зр╕Щ blob
                    canvas.toBlob(async (blob) => {
                        if (!blob) {
                            throw new Error('р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╕гр╣Йр╕▓р╕З blob');
                        }
                        
                        console.log('тЬЕ р╕кр╕гр╣Йр╕▓р╕З blob р╕кр╕│р╣Ар╕гр╣Зр╕И, р╕Вр╕Щр╕▓р╕Ф:', blob.size);
                        
                        // р╕кр╕гр╣Йр╕▓р╕Зр╕ер╕┤р╕Зр╕Бр╣Мр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф
                        const url = URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        const timestamp = new Date().getTime();
                        link.download = `BARAYA_ORDER_${timestamp}.png`;
                        link.href = url;
                        
                        // р╕Др╕ер╕┤р╕Бр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                        
                        // р╕ер╣Йр╕▓р╕З URL object
                        setTimeout(() => URL.revokeObjectURL(url), 100);
                        
                        if (window.hideLoading) hideLoading();
                        
                        // р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕кр╕│р╣Ар╕гр╣Зр╕И
                        if (window.toast) {
                            toast.success("ЁЯТ╛ р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕кр╕│р╣Ар╕гр╣Зр╕И!");
                        } else {
                            alert("тЬЕ р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕кр╕│р╣Ар╕гр╣Зр╕И!");
                        }
                        
                        console.log('тЬЕ р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╕кр╕│р╣Ар╕гр╣Зр╕И');
                        
                    }, 'image/png', 1.0);
                    
                } catch (error) {
                    console.error('тЭМ Error:', error);
                    if (window.hideLoading) hideLoading();
                    alert("тЭМ р╣Ар╕Бр╕┤р╕Фр╕Вр╣Йр╕нр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Ф: " + error.message);
                }
            });
        } else {
            console.error('тЭМ р╣Др╕бр╣Ир╕Юр╕Ър╕Ыр╕╕р╣Ир╕б saveOrderButton');
        }

        // р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕кр╕│р╕гр╕нр╕Зр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╕гр╕╣р╕Ы
        function downloadImageFallback(blob) {
            try {
                let link = document.createElement("a");
                link.href = URL.createObjectURL(blob);
                link.download = "baraya_perfume_order.png";
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                if (window.hideLoading) hideLoading();
                if (window.toast) {
                    toast.success("р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕кр╕│р╣Ар╕гр╣Зр╕И!");
                } else {
                    alert("тЬЕ р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕кр╕│р╣Ар╕гр╣Зр╕И!");
                }
                
                // р╕ер╣Йр╕▓р╕З URL object
                setTimeout(() => URL.revokeObjectURL(link.href), 100);
            } catch (error) {
                console.error('Download failed:', error);
                if (window.hideLoading) hideLoading();
                if (window.toast) {
                    toast.error("р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╣Др╕Фр╣Й");
                } else {
                    alert("тЭМ р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╣Др╕Фр╣Й");
                }
            }
        }
    </script>

</body>
</html>