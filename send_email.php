<?php
use PHPMailer\PHPMailer\PHPMailer;
use PHPMailer\PHPMailer\Exception;

require 'PHPMailer/Exception.php';
require 'PHPMailer/PHPMailer.php';
require 'PHPMailer/SMTP.php';

$mail = new PHPMailer(true);

try {
    // тЬЕ р╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Б POST
    $customer_name = $_POST['name'];
    $customer_email = $_POST['email'];
    $customer_address = $_POST['address'];
    $customer_phone = $_POST['phone'];
    $order_details = $_POST['orderDetails'];
    $total_price = $_POST['totalPrice'];

    // тЬЕ р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ SMTP
    $mail->isSMTP();
    $mail->Host       = 'smtp.gmail.com'; 
    $mail->SMTPAuth   = true;
    $mail->Username   = 'Barame07042536@gmail.com'; // ЁЯФ╣ р╕нр╕╡р╣Ар╕бр╕ер╕гр╣Йр╕▓р╕Щр╕Др╣Йр╕▓
    $mail->Password   = 'eezk fcqb hjgj auhb'; // ЁЯФ╣ р╣Гр╕Кр╣Й "App Password" р╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕Зр╕Ир╕▓р╕Б Google
    $mail->SMTPSecure = PHPMailer::ENCRYPTION_STARTTLS;
    $mail->Port       = 587;

    // тЬЕ р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕Ьр╕╣р╣Йр╕кр╣Ир╕З
    $mail->setFrom('Barame07042536@gmail.com', 'р╕гр╣Йр╕▓р╕Щр╕Др╣Йр╕▓ Baraya Perfume');

    // тЬЕ р╕кр╣Ир╕Зр╕нр╕╡р╣Ар╕бр╕ер╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╣Др╕Ыр╕вр╕▒р╕З **р╕Ьр╕╣р╣Йр╕Вр╕▓р╕в**
    $mail->addAddress('Barame07042536@gmail.com', 'р╣Ар╕Ир╣Йр╕▓р╕Вр╕нр╕Зр╕гр╣Йр╕▓р╕Щ'); 

    $mail->isHTML(true);
    $mail->Subject = 'ЁЯЫНя╕П р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╣Гр╕лр╕бр╣Ир╕Ир╕▓р╕Бр╣Ар╕зр╣Зр╕Ър╣Др╕Лр╕Хр╣М';

    // тЬЕ р╕кр╕гр╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕гр╣Йр╕▓р╕Щр╕Др╣Йр╕▓
    $message_to_seller = "
        <h2>ЁЯЫНя╕П р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╣Гр╕лр╕бр╣И</h2>
        <p><strong>ЁЯСд р╕Кр╕╖р╣Ир╕нр╕ер╕╣р╕Бр╕Др╣Йр╕▓:</strong> $customer_name</p>
        <p><strong>ЁЯУз р╕нр╕╡р╣Ар╕бр╕е:</strong> $customer_email</p>
        <p><strong>ЁЯПа р╕Чр╕╡р╣Ир╕нр╕вр╕╣р╣И:</strong> $customer_address</p>
        <p><strong>ЁЯУЮ р╣Ар╕Ър╕нр╕гр╣Мр╣Вр╕Чр╕г:</strong> $customer_phone</p>
        <p><strong>ЁЯТ░ р╕гр╕▓р╕Др╕▓р╕гр╕зр╕б:</strong> $total_price р╕Ър╕▓р╕Ч</p>
        <h3>ЁЯУж р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕кр╕┤р╕Щр╕Др╣Йр╕▓:</h3>
        <p>$order_details</p>
        <hr>
        <p>ЁЯУМ р╣Вр╕Ыр╕гр╕Фр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕кр╣Ир╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Вр╕Фр╕вр╣Ар╕гр╣Зр╕зр╕Чр╕╡р╣Ир╕кр╕╕р╕Ф</p>
    ";
    
    $mail->Body = $message_to_seller;
    $mail->send();

    // тЬЕ р╕кр╣Ир╕Зр╕нр╕╡р╣Ар╕бр╕ер╕вр╕╖р╕Щр╕вр╕▒р╕Щр╣Др╕Ыр╕вр╕▒р╕З **р╕ер╕╣р╕Бр╕Др╣Йр╕▓**
    $mail->clearAddresses(); // р╕ер╣Йр╕▓р╕Зр╕нр╕╡р╣Ар╕бр╕ер╕Бр╣Ир╕нр╕Щр╕кр╣Ир╕Зр╣Гр╕лр╕бр╣И
    $mail->addAddress($customer_email); // р╕кр╣Ир╕Зр╣Др╕Ыр╕вр╕▒р╕Зр╕нр╕╡р╣Ар╕бр╕ер╕ер╕╣р╕Бр╕Др╣Йр╕▓

    $mail->Subject = "ЁЯУж р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕Вр╕нр╕Зр╕Др╕╕р╕Ур╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕вр╕╖р╕Щр╕вр╕▒р╕Щр╣Бр╕ер╣Йр╕з!";
    
    // тЬЕ р╕кр╕гр╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕ер╕╣р╕Бр╕Др╣Йр╕▓
    $message_to_customer = "
        <h2>тЬЕ р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕Вр╕нр╕Зр╕Др╕╕р╕Ур╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕вр╕╖р╕Щр╕вр╕▒р╕Щр╣Бр╕ер╣Йр╕з!</h2>
        <p>р╕Вр╕нр╕Ър╕Др╕╕р╕Ур╕Чр╕╡р╣Ир╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Бр╕▒р╕Ър╣Ар╕гр╕▓ <strong>Baraya Perfume</strong></p>
        <p>р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╕Вр╕нр╕Зр╕Др╕╕р╕Ур╕бр╕╡р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Фр╕▒р╕Зр╕Щр╕╡р╣Й:</p>
        <p><strong>ЁЯТ░ р╕гр╕▓р╕Др╕▓р╕гр╕зр╕б:</strong> $total_price р╕Ър╕▓р╕Ч</p>
        <h3>ЁЯУж р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕кр╕┤р╕Щр╕Др╣Йр╕▓:</h3>
        <p>$order_details</p>
        <hr>
        <p>ЁЯУМ р╣Ар╕гр╕▓р╕Ир╕░р╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕кр╣Ир╕Зр╣Гр╕лр╣Йр╣Ар╕гр╣Зр╕зр╕Чр╕╡р╣Ир╕кр╕╕р╕Ф! р╕Бр╕гр╕╕р╕Ур╕▓р╕гр╕нр╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Ар╕Фр╕Х</p>
        <p>ЁЯУЮ р╕лр╕▓р╕Бр╕бр╕╡р╕Вр╣Йр╕нр╕кр╕Зр╕кр╕▒р╕в р╕Хр╕┤р╕Фр╕Хр╣Ир╕нр╣Ар╕гр╕▓р╣Др╕Фр╣Йр╕Чр╕╡р╣Ир╕нр╕╡р╣Ар╕бр╕е: <a href='mailto:Barame07042536@gmail.com'>Barame07042536@gmail.com</a></p>
    ";

    $mail->Body = $message_to_customer;
    $mail->send();

    echo 'тЬЕ р╕нр╕╡р╣Ар╕бр╕ер╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕Цр╕╣р╕Бр╕кр╣Ир╕Зр╕кр╕│р╣Ар╕гр╣Зр╕И';
} catch (Exception $e) {
    echo "тЭМ р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╣Ир╕Зр╕нр╕╡р╣Ар╕бр╕ер╣Др╕Фр╣Й: {$mail->ErrorInfo}";
}
?>
